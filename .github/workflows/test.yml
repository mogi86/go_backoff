name: Test
on: [push]
jobs:
  setup:
    runs-on: ubuntu-latest
    steps:
      - name: set up
        uses: actions/setup-go@v2
        with:
          go-version: ^1.15
        id: go
      - name: check out
        uses: actions/checkout@v2
  lint:
    needs: setup
    runs-on: ubuntu-latest
    steps:
      #- uses: actions/checkout@v2
      - name: Install golangci-lint
        run: |
          curl -sfL https://install.goreleaser.com/github.com/golangci/golangci-lint.sh | sh -s v1.17.1
          sudo mv ./bin/golangci-lint $GOPATH/bin/
      - name: Run golangci-lint
        run: >
          golangci-lint run \
          --tests \
          --enable-all \
          --disable gochecknoglobals \
          --disable gochecknoinits
